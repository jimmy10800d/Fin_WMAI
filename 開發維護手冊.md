# Fin_WMAI é–‹ç™¼ç¶­è­·æ‰‹å†Š

<div align="center">
  <h3>ğŸ’» é–‹ç™¼è€…æŠ€è¡“æ–‡ä»¶</h3>
  <p>æœ¬æ‰‹å†Šæä¾›ç³»çµ±æ¶æ§‹ã€ç¨‹å¼ç¢¼è¦ç¯„èˆ‡é–‹ç™¼æŒ‡å¼•</p>
</div>

---

## ğŸ“– ç›®éŒ„

1. [å°ˆæ¡ˆæ¦‚è¿°](#1-å°ˆæ¡ˆæ¦‚è¿°)
2. [é–‹ç™¼ç’°å¢ƒè¨­å®š](#2-é–‹ç™¼ç’°å¢ƒè¨­å®š)
3. [å°ˆæ¡ˆçµæ§‹](#3-å°ˆæ¡ˆçµæ§‹)
4. [è¨­è¨ˆç³»çµ±](#4-è¨­è¨ˆç³»çµ±)
5. [å‰ç«¯æ¶æ§‹](#5-å‰ç«¯æ¶æ§‹)
6. [å¾Œå°ç³»çµ±](#6-å¾Œå°ç³»çµ±)
7. [AI æ•´åˆ](#7-ai-æ•´åˆ)
8. [è³‡æ–™å±¤](#8-è³‡æ–™å±¤)
9. [ç¨‹å¼ç¢¼è¦ç¯„](#9-ç¨‹å¼ç¢¼è¦ç¯„)
10. [æ“´å±•æŒ‡å—](#10-æ“´å±•æŒ‡å—)
11. [æ¸¬è©¦æŒ‡å—](#11-æ¸¬è©¦æŒ‡å—)
12. [éƒ¨ç½²æµç¨‹](#12-éƒ¨ç½²æµç¨‹)

---

## 1. å°ˆæ¡ˆæ¦‚è¿°

### 1.1 å°ˆæ¡ˆèƒŒæ™¯

Fin_WMAI æ˜¯åŸºæ–¼ BDDï¼ˆBehavior-Driven Developmentï¼‰è¦æ ¼è¨­è¨ˆçš„æ™ºæ…§æŠ•è³‡ç†è²¡è¦åŠƒç³»çµ±åŸå‹ï¼Œç›®æ¨™æ˜¯ç‚ºæŠ•è³‡æ–°æ‰‹æä¾›ä»¥äººç”Ÿç›®æ¨™ç‚ºå°å‘çš„ç†è²¡æœå‹™ã€‚

### 1.2 æŠ€è¡“æ±ºç­–

| é …ç›® | é¸æ“‡ | åŸå›  |
|------|------|------|
| å‰ç«¯æ¡†æ¶ | Vanilla JS | æ¸›å°‘ä¾è³´ã€å¿«é€ŸåŸå‹é–‹ç™¼ |
| æ¨£å¼ç®¡ç† | CSS Variables | æ”¯æ´ä¸»é¡Œåˆ‡æ› |
| AI æœå‹™ | Ollama | æœ¬åœ°éƒ¨ç½²ã€éš±ç§ä¿è­· |
| è³‡æ–™æ ¼å¼ | JSON | ç°¡å–®æ˜“ç”¨ã€ä¾¿æ–¼æ¨¡æ“¬ |

### 1.3 BDD è¦æ ¼

å°ˆæ¡ˆéµå¾ª `Fin_WMAI_BDD_V1.0_20260213.md` è¦æ ¼æ›¸ï¼ŒåŒ…å«å…­å¤§åŠŸèƒ½ç‰¹æ€§ï¼š

1. Feature 1ï¼šå•Ÿè’™èˆ‡ç›®æ¨™è¨­å®š
2. Feature 2ï¼šé¢¨éšªèˆ‡èƒ½åŠ›è©•ä¼°
3. Feature 3ï¼šAI ç™½è©±åŒ–æŠ•è³‡å»ºè­°
4. Feature 4ï¼šäº¤æ˜“åŸ·è¡Œèˆ‡åˆè¦
5. Feature 5ï¼šè³‡ç”¢ç›£æ§å„€è¡¨æ¿
6. Feature 6ï¼šç¤¾äº¤åˆ†äº«åŠŸèƒ½

---

## 2. é–‹ç™¼ç’°å¢ƒè¨­å®š

### 2.1 å¿…è¦å·¥å…·

```bash
# é–‹ç™¼å·¥å…·
- VS Codeï¼ˆå»ºè­°ï¼‰
- Python 3.8+
- Git
- ç¾ä»£ç€è¦½å™¨ï¼ˆChrome DevToolsï¼‰

# é¸ç”¨å·¥å…·
- Ollamaï¼ˆAI åŠŸèƒ½ï¼‰
- Live Server Extensionï¼ˆVS Codeï¼‰
```

### 2.2 VS Code æ“´å±•æ¨è–¦

```json
{
  "recommendations": [
    "ritwickdey.LiveServer",
    "esbenp.prettier-vscode",
    "ms-python.python",
    "formulahendry.auto-rename-tag",
    "christian-kohler.path-intellisense"
  ]
}
```

### 2.3 å¿«é€Ÿé–‹å§‹

```bash
# 1. Clone å°ˆæ¡ˆ
git clone <repository-url>
cd Fin_WMAI

# 2. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
cd prototype
python -m http.server 8000

# 3. å•Ÿå‹• AI æœå‹™ï¼ˆå¯é¸ï¼‰
ollama run llama3.1:8b

# 4. é–‹å•Ÿç€è¦½å™¨
# http://localhost:8000/login.html
```

---

## 3. å°ˆæ¡ˆçµæ§‹

### 3.1 å®Œæ•´ç›®éŒ„æ¨¹

```
Fin_WMAI/
â”œâ”€â”€ prototype/                    # å‰ç«¯åŸå‹
â”‚   â”œâ”€â”€ index.html               # ä¸»æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚   â”œâ”€â”€ login.html               # å‰å°ç™»å…¥é é¢
â”‚   â”‚
â”‚   â”œâ”€â”€ css/                     # æ¨£å¼æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ styles.css           # åŸºç¤è¨­è¨ˆç³»çµ±èˆ‡ä¸»é¡Œ
â”‚   â”‚   â”œâ”€â”€ pages.css            # å„é é¢ç‰¹å®šæ¨£å¼
â”‚   â”‚   â””â”€â”€ login.css            # ç™»å…¥é é¢æ¨£å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ js/                      # JavaScript æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ app.js               # ä¸»æ‡‰ç”¨ç¨‹å¼ï¼ˆè·¯ç”±ã€ç‹€æ…‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ chatbot.js           # AI èŠå¤©æ©Ÿå™¨äºº
â”‚   â”‚   â”œâ”€â”€ data-service.js      # è³‡æ–™æœå‹™å±¤
â”‚   â”‚   â”œâ”€â”€ demo.js              # Demo åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ login.js             # ç™»å…¥é‚è¼¯
â”‚   â”‚   â””â”€â”€ pages/               # é é¢æ¨¡çµ„
â”‚   â”‚       â”œâ”€â”€ home.js          # é¦–é 
â”‚   â”‚       â”œâ”€â”€ goals.js         # ç›®æ¨™è¨­å®šï¼ˆFeature 1ï¼‰
â”‚   â”‚       â”œâ”€â”€ profile.js       # é¢¨éšªè©•ä¼°ï¼ˆFeature 2ï¼‰
â”‚   â”‚       â”œâ”€â”€ recommendation.js # AI å»ºè­°ï¼ˆFeature 3ï¼‰
â”‚   â”‚       â”œâ”€â”€ execution.js     # äº¤æ˜“åŸ·è¡Œï¼ˆFeature 4ï¼‰
â”‚   â”‚       â”œâ”€â”€ dashboard.js     # å„€è¡¨æ¿ï¼ˆFeature 5ï¼‰
â”‚   â”‚       â””â”€â”€ share.js         # åˆ†äº«åŠŸèƒ½ï¼ˆFeature 6ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                    # æ¨¡æ“¬è³‡æ–™
â”‚   â”‚   â””â”€â”€ demo-data.json       # å®Œæ•´ Demo è³‡æ–™é›†
â”‚   â”‚
â”‚   â”œâ”€â”€ IP_ICON/                 # IP è§’è‰²åœ–ç¤º
â”‚   â”‚   â”œâ”€â”€ IP_HELLO.png
â”‚   â”‚   â”œâ”€â”€ IP_THINKING.png
â”‚   â”‚   â”œâ”€â”€ IP_NOTICE.png
â”‚   â”‚   â”œâ”€â”€ IP_KEEPCARE.png
â”‚   â”‚   â”œâ”€â”€ IP_KEEPEARN.png
â”‚   â”‚   â”œâ”€â”€ IP_ASSET_UP.png
â”‚   â”‚   â”œâ”€â”€ IP_GOODNIGHT.png
â”‚   â”‚   â””â”€â”€ IP_NEW_CHANGE.png
â”‚   â”‚
â”‚   â”œâ”€â”€ admin/                   # å¾Œå°ç®¡ç†ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ index.html           # å¾Œå°ä¸»é 
â”‚   â”‚   â”œâ”€â”€ login.html           # å¾Œå°ç™»å…¥
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ admin.css        # å¾Œå°æ¨£å¼
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â”œâ”€â”€ admin.js         # å¾Œå°é‚è¼¯
â”‚   â”‚       â””â”€â”€ login.js         # å¾Œå°ç™»å…¥é‚è¼¯
â”‚   â”‚
â”‚   â””â”€â”€ README.md                # Prototype èªªæ˜
â”‚
â”œâ”€â”€ DOC/                         # æ–‡ä»¶è³‡æ–™
â”œâ”€â”€ IP_ICON/                     # åŸå§‹åœ–ç¤ºè³‡æº
â”‚
â”œâ”€â”€ README.md                    # å°ˆæ¡ˆç¸½è¦½
â”œâ”€â”€ ä½¿ç”¨è€…æ‰‹å†Š.md                 # ä½¿ç”¨è€…æ“ä½œæŒ‡å—
â”œâ”€â”€ ç³»çµ±ç¶­è­·æ‰‹å†Š.md               # ç³»çµ±ç®¡ç†æŒ‡å—
â”œâ”€â”€ é–‹ç™¼ç¶­è­·æ‰‹å†Š.md               # é–‹ç™¼è€…æ–‡ä»¶ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â””â”€â”€ Fin_WMAI_BDD_V1.0_20260213.md # BDD è¦æ ¼æ›¸
```

### 3.2 æ¨¡çµ„ä¾è³´é—œä¿‚

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  index.html â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼            â–¼            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ app.js  â”‚  â”‚styles.cssâ”‚  â”‚pages.cssâ”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼        â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚chatbot â”‚ â”‚data-service  â”‚ â”‚pages/*.jsâ”‚
â”‚   .js  â”‚ â”‚     .js      â”‚ â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚            â”‚
     â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ollama  â”‚ â”‚demo-data.json â”‚
â”‚  API    â”‚ â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. è¨­è¨ˆç³»çµ±

### 4.1 CSS è®Šæ•¸æ¶æ§‹

```css
/* styles.css - è¨­è¨ˆç³»çµ±æ ¸å¿ƒ */

:root {
    /* ===== è«è˜­è¿ªæ·±è‰²ä¸»é¡Œ ===== */
    
    /* ä¸»è‰²èª¿ */
    --primary-dark: #2C363D;      /* æ·±åº¦èƒŒæ™¯ */
    --primary: #3A4750;            /* å¡ç‰‡èƒŒæ™¯ */
    --primary-light: #4A5860;      /* è¼ƒæ·ºèƒŒæ™¯ */
    
    /* å¼·èª¿è‰² - æš–æ£•è‰²ç³» */
    --accent: #C59B85;             /* ä¸»è¦å¼·èª¿ */
    --accent-light: #D4B5A3;       /* æ·ºå¼·èª¿ */
    --accent-dark: #A67B65;        /* æ·±å¼·èª¿ */
    
    /* èªç¾©è‰²å½© */
    --success: #5D9B84;            /* æˆåŠŸ */
    --warning: #D4A574;            /* è­¦å‘Š */
    --danger: #C27B7B;             /* å±éšª */
    --info: #6A9AB0;               /* è³‡è¨Š */
    
    /* ä¸­æ€§è‰²éš */
    --gray-100: #F2F5F5;
    --gray-200: #E5EAEB;
    --gray-300: #B8C9CF;
    --gray-400: #99AFB7;
    --gray-500: #7A929E;
    --gray-600: #6A828E;
    --gray-700: #4A5860;
    --gray-800: #3A4750;
    --gray-900: #2C363D;
    
    /* ä¸»é¡Œè®Šæ•¸ */
    --bg-primary: #2C363D;
    --bg-secondary: #3A4750;
    --text-primary: #F2F5F5;
    --text-secondary: #99AFB7;
    
    /* ç‰¹æ®Šç”¨é€” */
    --chat-bubble-bg: #EAD7CE;     /* å°é›²å°è©±æ¡† */
    --chat-bubble-text: #3A4750;
    
    /* å°ºå¯¸ç³»çµ± */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 16px;
    --space-lg: 24px;
    --space-xl: 32px;
    
    /* åœ“è§’ */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    
    /* å‹•ç•« */
    --transition-fast: 0.15s ease;
    --transition-normal: 0.3s ease;
}
```

### 4.2 æ·ºè‰²ä¸»é¡Œè¦†è“‹

```css
[data-theme="light"] {
    --bg-primary: #F2F5F5;
    --bg-secondary: #FFFFFF;
    --text-primary: #2C363D;
    --text-secondary: #4A5860;
    --text-muted: #5A7280;
    --border-color: #99AFB7;
}
```

### 4.3 ä¸»é¡Œåˆ‡æ›å¯¦ä½œ

```javascript
// app.js - ä¸»é¡Œåˆ‡æ›
function toggleTheme() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    
    // æ›´æ–°åˆ‡æ›æŒ‰éˆ•åœ–ç¤º
    const icon = document.querySelector('.theme-toggle-btn i');
    icon.className = newTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
    
    // é‡æ–°æ¸²æŸ“éœ€è¦ä¸»é¡Œé©é…çš„å…ƒä»¶ï¼ˆå¦‚å„€è¡¨æ¿åœ–è¡¨ï¼‰
    if (AppState.currentPage === 'dashboard' && typeof renderAssetChart === 'function') {
        renderAssetChart();
    }
}
```

### 4.4 åœ–è¡¨ä¸»é¡Œé©é…

è³‡ç”¢è®ŠåŒ–ç›´æ–¹åœ–ä½¿ç”¨ CSS è®Šæ•¸å¯¦ç¾è‡ªå‹•ä¸»é¡Œé©é…ï¼š

```css
/* åœ–è¡¨æ¨£å¼ä½¿ç”¨ CSS è®Šæ•¸ */
.asset-bar-value {
    color: var(--text-primary);  /* è‡ªå‹•è·Ÿéš¨ä¸»é¡Œ */
}
.asset-bar-label {
    color: var(--text-secondary);
}
.asset-bar-dot {
    border: 3px solid var(--bg-card);  /* èƒŒæ™¯è‰²é‚Šæ¡† */
}
```

---

## 5. å‰ç«¯æ¶æ§‹

### 5.1 æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹ç®¡ç†

```javascript
// app.js - å…¨åŸŸç‹€æ…‹
const AppState = {
    currentPage: 'home',
    user: {
        name: 'å®˜å¤§å¤§',
        status: 'æ–°æ‰‹æŠ•è³‡è€…',
        riskScore: null,
        riskGrade: null
    },
    theme: 'dark',
    goals: [],
    currentGoal: null,
    profile: null,
    recommendation: null,
    actionList: [],
    riskDisclosureAcknowledged: false,
    events: []  // äº‹ä»¶è¿½è¹¤
};
```

### 5.2 è·¯ç”±ç³»çµ±

```javascript
// SPA è·¯ç”±æ©Ÿåˆ¶
function navigateTo(page) {
    // æ›´æ–°ç‹€æ…‹
    AppState.currentPage = page;
    
    // æ›´æ–°å°èˆª
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.toggle('active', link.dataset.page === page);
    });
    
    // è¼‰å…¥é é¢å…§å®¹
    loadPageContent(page);
    
    // è¨˜éŒ„äº‹ä»¶
    logEvent('page_view', { page });
}

function loadPageContent(page) {
    const mainContent = document.getElementById('mainContent');
    
    // æ ¹æ“šé é¢è¼‰å…¥å°æ‡‰å…§å®¹
    switch(page) {
        case 'home':
            renderHomePage(mainContent);
            break;
        case 'goals':
            renderGoalsPage(mainContent);
            break;
        // ... å…¶ä»–é é¢
    }
}
```

### 5.3 é é¢æ¨¡çµ„æ¨¡å¼

æ¯å€‹é é¢æ¨¡çµ„éµå¾ªç›¸åŒçš„çµæ§‹ï¼š

```javascript
// pages/goals.js - é é¢æ¨¡çµ„ç¯„ä¾‹

/**
 * æ¸²æŸ“ç›®æ¨™è¨­å®šé é¢
 * @param {HTMLElement} container - ç›®æ¨™å®¹å™¨
 */
function renderGoalsPage(container) {
    container.innerHTML = `
        <div class="page-header">
            <h1>ç›®æ¨™è¨­å®š</h1>
        </div>
        <div class="goals-container">
            ${renderGoalTags()}
        </div>
    `;
    
    // ç¶å®šäº‹ä»¶
    bindGoalEvents();
}

function renderGoalTags() {
    const goals = [
        { id: 'retirement', name: 'é€€ä¼‘ç”Ÿæ´»', icon: 'ğŸŒ´' },
        { id: 'house', name: 'è²·æˆ¿é ­æœŸæ¬¾', icon: 'ğŸ ' },
        // ...
    ];
    
    return goals.map(goal => `
        <div class="goal-tag" data-goal="${goal.id}">
            <span class="goal-icon">${goal.icon}</span>
            <span class="goal-name">${goal.name}</span>
        </div>
    `).join('');
}

function bindGoalEvents() {
    document.querySelectorAll('.goal-tag').forEach(tag => {
        tag.addEventListener('click', () => selectGoal(tag.dataset.goal));
    });
}
```

### 5.4 äº‹ä»¶è¿½è¹¤ç³»çµ±

```javascript
// äº‹ä»¶è¨˜éŒ„å‡½æ•¸
function logEvent(eventName, data = {}) {
    const event = {
        event: eventName,
        timestamp: new Date().toISOString(),
        userId: AppState.user?.id || 'anonymous',
        sessionId: sessionStorage.getItem('sessionId'),
        ...data
    };
    
    AppState.events.push(event);
    console.log('ğŸ“Š Event:', event);
    
    // æœªä¾†å¯ç™¼é€è‡³åˆ†ææœå‹™
    // sendToAnalytics(event);
}

// ä½¿ç”¨ç¯„ä¾‹
logEvent('goal_selected', { goalId: 'retirement', goalAmount: 5000000 });
logEvent('kyc_completed', { riskScore: 65, riskGrade: 'moderate' });
```

---

## 6. å¾Œå°ç³»çµ±

### 6.1 å¾Œå°æ¶æ§‹

```javascript
// admin/js/admin.js - å¾Œå°ä¸»ç¨‹å¼

const AdminState = {
    currentPage: 'dashboard',
    currentUser: null,
    isAuthenticated: false
};

// é é¢æ¸²æŸ“å™¨
const PageRenderers = {
    dashboard: renderDashboardPage,
    knowledge: renderKnowledgePage,
    faq: renderFaqPage,
    prompts: renderPromptsPage,
    datasource: renderDatasourcePage,
    risk: renderRiskPage,
    compliance: renderCompliancePage,
    audit: renderAuditPage,
    users: renderUsersPage,
    roles: renderRolesPage,
    settings: renderSettingsPage
};
```

### 6.2 CRUD æ“ä½œæ¨¡å¼

```javascript
// çŸ¥è­˜åº« CRUD ç¯„ä¾‹
const KnowledgeManager = {
    items: [],
    
    async load() {
        // æ¨¡æ“¬ API å‘¼å«
        this.items = await fetchKnowledgeData();
        this.render();
    },
    
    create(item) {
        item.id = Date.now();
        item.createdAt = new Date().toISOString();
        this.items.push(item);
        this.render();
        showToast('çŸ¥è­˜æ¢ç›®å·²æ–°å¢', 'success');
    },
    
    update(id, updates) {
        const index = this.items.findIndex(i => i.id === id);
        if (index !== -1) {
            this.items[index] = { ...this.items[index], ...updates };
            this.render();
            showToast('çŸ¥è­˜æ¢ç›®å·²æ›´æ–°', 'success');
        }
    },
    
    delete(id) {
        this.items = this.items.filter(i => i.id !== id);
        this.render();
        showToast('çŸ¥è­˜æ¢ç›®å·²åˆªé™¤', 'info');
    },
    
    render() {
        const container = document.getElementById('knowledgeList');
        container.innerHTML = this.items.map(renderKnowledgeCard).join('');
    }
};
```

### 6.3 æ¬Šé™æ§åˆ¶

```javascript
// è§’è‰²æ¬Šé™å®šç¾©
const Permissions = {
    admin: ['*'],  // æ‰€æœ‰æ¬Šé™
    manager: ['knowledge', 'faq', 'prompts', 'datasource'],
    auditor: ['audit', 'compliance'],  // å”¯è®€
    viewer: ['dashboard']
};

// æ¬Šé™æª¢æŸ¥
function hasPermission(action) {
    const role = AdminState.currentUser?.role || 'viewer';
    const permissions = Permissions[role];
    return permissions.includes('*') || permissions.includes(action);
}

// ä½¿ç”¨ç¯„ä¾‹
if (!hasPermission('knowledge')) {
    showToast('æ‚¨æ²’æœ‰æ­¤æ“ä½œçš„æ¬Šé™', 'error');
    return;
}
```

---

## 7. AI æ•´åˆ

### 7.1 Ollama é…ç½®

```javascript
// chatbot.js - AI æœå‹™é…ç½®

const OllamaConfig = {
    baseUrl: 'http://localhost:11434',
    model: 'llama3.1:8b',  // é è¨­æ¨¡å‹ï¼Œæœƒè‡ªå‹•åµæ¸¬å¯ç”¨æ¨¡å‹
    enabled: true,
    timeout: 60000,
    systemPrompt: `ä½ æ˜¯ã€Œå°é›²ã€ï¼Œä¸€ä½è¦ªåˆ‡ã€å°ˆæ¥­çš„æ™ºæ…§ç†è²¡å°åŠ©æ‰‹ã€‚
- ä½¿ç”¨ç¹é«”ä¸­æ–‡å›ç­”
- èªªè©±è¦ªåˆ‡å‹å–„ï¼Œé©æ™‚ä½¿ç”¨è¡¨æƒ…ç¬¦è™Ÿ
- å°ˆæ³¨æ–¼æŠ•è³‡ç†è²¡ç›¸é—œè©±é¡Œ
- å›ç­”ç°¡æ½”æ˜ç­ï¼Œä½¿ç”¨åˆ—é»å’Œåˆ†æ®µ
- æé†’ç”¨æˆ¶æŠ•è³‡æœ‰é¢¨éšª`
};
```

### 7.2 æ¨¡å‹è‡ªå‹•åµæ¸¬

ç•¶é è¨­æ¨¡å‹ä¸å¯ç”¨æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•åµæ¸¬ä¸¦åˆ‡æ›åˆ°å¯ç”¨çš„ Ollama æ¨¡å‹ï¼š

```javascript
// è‡ªå‹•åµæ¸¬å¯ç”¨æ¨¡å‹
async function checkOllamaStatus() {
    try {
        const response = await fetch(`${OllamaConfig.baseUrl}/api/tags`);
        const data = await response.json();
        
        if (data.models && data.models.length > 0) {
            // æª¢æŸ¥é è¨­æ¨¡å‹æ˜¯å¦å¯ç”¨
            const defaultAvailable = data.models.some(
                m => m.name === OllamaConfig.model
            );
            
            if (!defaultAvailable) {
                // è‡ªå‹•åˆ‡æ›åˆ°ç¬¬ä¸€å€‹å¯ç”¨æ¨¡å‹
                OllamaConfig.model = data.models[0].name;
                console.log(`ğŸ”„ Auto-switched to model: ${OllamaConfig.model}`);
            }
            
            return true;
        }
    } catch (error) {
        return false;
    }
}
```

### 7.3 API å‘¼å«

```javascript
// å‘¼å« Ollama API
async function callOllamaAPI(userMessage) {
    // æº–å‚™å°è©±æ­·å²
    const messages = [
        { role: 'system', content: OllamaConfig.systemPrompt },
        ...ChatbotState.conversationHistory,
        { role: 'user', content: userMessage }
    ];
    
    try {
        const response = await fetch(`${OllamaConfig.baseUrl}/api/chat`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                model: OllamaConfig.model,
                messages: messages,
                stream: false,
                options: {
                    temperature: 0.7,
                    num_ctx: 4096
                }
            }),
            signal: AbortSignal.timeout(OllamaConfig.timeout)
        });
        
        if (!response.ok) {
            throw new Error(`Ollama API error: ${response.status}`);
        }
        
        const data = await response.json();
        return data.message.content;
        
    } catch (error) {
        console.error('Ollama API failed:', error);
        return null;  // å›é€€åˆ°æœ¬åœ°çŸ¥è­˜åº«
    }
}
```

### 7.3 å€‹äººè³‡æ–™æŸ¥è©¢æ•´åˆ

```javascript
// å°‡ç”¨æˆ¶è³‡æ–™æ³¨å…¥ AI å°è©±
function buildContextPrompt(userMessage) {
    let context = '';
    
    // æª¢æ¸¬æŸ¥è©¢æ„åœ–
    if (containsKeywords(userMessage, ['è³‡ç”¢', 'å¤šå°‘éŒ¢', 'å¸³æˆ¶'])) {
        const summary = PersonalDataQueries.getAssetSummary();
        context += `ç”¨æˆ¶è³‡ç”¢è³‡è¨Šï¼š${JSON.stringify(summary)}\n`;
    }
    
    if (containsKeywords(userMessage, ['æŒå€‰', 'åŸºé‡‘', 'è‚¡ç¥¨'])) {
        const holdings = PersonalDataQueries.getHoldings();
        context += `æŒå€‰æ˜ç´°ï¼š${JSON.stringify(holdings)}\n`;
    }
    
    return context + userMessage;
}
```

### 7.4 æœ¬åœ°çŸ¥è­˜åº«å›é€€

```javascript
// ç•¶ AI ä¸å¯ç”¨æ™‚çš„æœ¬åœ°å›ç­”
const LocalKnowledge = {
    patterns: [
        {
            keywords: ['è³‡ç”¢', 'ç¸½è¦½', 'å¤šå°‘éŒ¢'],
            handler: () => {
                const data = PersonalDataQueries.getAssetSummary();
                return formatAssetSummaryResponse(data);
            }
        },
        {
            keywords: ['å®šæœŸå®šé¡', 'æ˜¯ä»€éº¼'],
            response: 'å®šæœŸå®šé¡æ˜¯ä¸€ç¨®æŠ•è³‡ç­–ç•¥ï¼Œæ¯æœˆå›ºå®šæŠ•å…¥ä¸€å®šé‡‘é¡...'
        }
        // ... æ›´å¤šè¦å‰‡
    ],
    
    findAnswer(message) {
        for (const pattern of this.patterns) {
            if (containsKeywords(message, pattern.keywords)) {
                return pattern.handler 
                    ? pattern.handler() 
                    : pattern.response;
            }
        }
        return null;
    }
};
```

---

## 8. è³‡æ–™å±¤

### 8.1 Demo è³‡æ–™çµæ§‹

```json
// data/demo-data.json çµæ§‹
{
    "customers": [
        {
            "id": "cust_001",
            "name": "å®˜å¤§å¤§",
            "email": "kuan@example.com",
            "riskProfile": {
                "score": 65,
                "grade": "moderate"
            },
            "tags": ["æ–°æ‰‹æŠ•è³‡è€…", "ç§‘æŠ€æ¥­"]
        }
    ],
    "accounts": [...],
    "holdings": [...],
    "transactions": [...],
    "goals": [...],
    "products": [...],
    "market": {...}
}
```

### 8.2 è³‡æ–™æœå‹™å±¤

```javascript
// data-service.js - è³‡æ–™æœå‹™

const demoDataService = {
    data: null,
    loaded: false,
    
    async loadData() {
        try {
            const response = await fetch('data/demo-data.json');
            this.data = await response.json();
            this.loaded = true;
            console.log('âœ… Demo data loaded');
        } catch (error) {
            console.error('Failed to load demo data:', error);
        }
    },
    
    // æŸ¥è©¢æ–¹æ³•
    getCustomerById(id) {
        return this.data?.customers?.find(c => c.id === id);
    },
    
    getCustomerAccounts(customerId) {
        return this.data?.accounts?.filter(a => a.customerId === customerId);
    },
    
    getCustomerHoldings(customerId) {
        return this.data?.holdings?.filter(h => h.customerId === customerId);
    },
    
    getCustomerAccountSummary(customerId) {
        const holdings = this.getCustomerHoldings(customerId);
        const totalValue = holdings.reduce((sum, h) => sum + h.marketValue, 0);
        const totalReturn = holdings.reduce((sum, h) => sum + h.unrealizedPL, 0);
        
        return {
            totalValue,
            totalReturn,
            returnRate: totalReturn / (totalValue - totalReturn)
        };
    }
};
```

---

## 9. ç¨‹å¼ç¢¼è¦ç¯„

### 9.1 å‘½åè¦ç¯„

```javascript
// è®Šæ•¸ï¼šcamelCase
const userName = 'John';
const isLoggedIn = true;

// å¸¸æ•¸ï¼šUPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;
const API_BASE_URL = 'http://localhost:11434';

// å‡½æ•¸ï¼šcamelCaseï¼Œå‹•è©é–‹é ­
function getUserData() {}
function handleClick() {}
function renderPage() {}

// é¡åˆ¥/å»ºæ§‹å­ï¼šPascalCase
class ChatbotManager {}
const AppState = {};

// CSS é¡åˆ¥ï¼škebab-case
.user-profile {}
.chat-message-bubble {}
.nav-link-active {}
```

### 9.2 æª”æ¡ˆçµ„ç¹”

```javascript
/**
 * æª”æ¡ˆé ­éƒ¨è¨»è§£
 * filename.js - åŠŸèƒ½èªªæ˜
 * 
 * @description è©³ç´°æè¿°
 * @author ä½œè€…
 * @version 1.0
 */

// ===== 1. å¸¸æ•¸å®šç¾© =====
const CONFIG = {};

// ===== 2. ç‹€æ…‹å®šç¾© =====
const State = {};

// ===== 3. å·¥å…·å‡½æ•¸ =====
function helperFunction() {}

// ===== 4. æ ¸å¿ƒé‚è¼¯ =====
function mainLogic() {}

// ===== 5. äº‹ä»¶è™•ç† =====
function handleEvent() {}

// ===== 6. æ¸²æŸ“å‡½æ•¸ =====
function renderComponent() {}

// ===== 7. åˆå§‹åŒ– =====
function init() {}

// ===== 8. å°å‡ºï¼ˆå¦‚éœ€è¦ï¼‰=====
// export { init, State };
```

### 9.3 CSS çµ„ç¹”

```css
/* 1. è®Šæ•¸å®šç¾© */
:root { }

/* 2. Reset & Base */
* { box-sizing: border-box; }

/* 3. Typography */
h1, h2, h3 { }

/* 4. Layout */
.container { }
.sidebar { }

/* 5. Components */
.card { }
.button { }

/* 6. Page-specific */
.home-page { }

/* 7. Utilities */
.text-center { }
.mt-1 { }

/* 8. Media Queries */
@media (max-width: 768px) { }
```

### 9.4 è¨»è§£è¦ç¯„

```javascript
/**
 * å‡½æ•¸èªªæ˜
 * @param {string} userId - ä½¿ç”¨è€… ID
 * @param {Object} options - é¸é …
 * @returns {Promise<Object>} ä½¿ç”¨è€…è³‡æ–™
 */
async function getUserById(userId, options = {}) {
    // å–®è¡Œè¨»è§£ï¼šèªªæ˜é‡è¦é‚è¼¯
    
    /*
     * å¤šè¡Œè¨»è§£ï¼š
     * èªªæ˜è¤‡é›œé‚è¼¯æˆ–
     * é‡è¦æ±ºç­–åŸå› 
     */
}

// TODO: å¾…è¾¦äº‹é …
// FIXME: éœ€ä¿®å¾©çš„å•é¡Œ
// HACK: è‡¨æ™‚è§£æ±ºæ–¹æ¡ˆ
// NOTE: é‡è¦èªªæ˜
```

---

## 10. æ“´å±•æŒ‡å—

### 10.1 æ–°å¢é é¢

```javascript
// 1. å»ºç«‹é é¢æ¨¡çµ„ pages/newpage.js
function renderNewPage(container) {
    container.innerHTML = `
        <div class="page-header">
            <h1>æ–°é é¢</h1>
        </div>
        <div class="page-content">
            <!-- é é¢å…§å®¹ -->
        </div>
    `;
    bindNewPageEvents();
}

// 2. åœ¨ app.js è¨»å†Šè·¯ç”±
case 'newpage':
    renderNewPage(mainContent);
    break;

// 3. åœ¨ index.html æ·»åŠ å°èˆª
<a class="nav-link" data-page="newpage">
    <i class="fas fa-plus"></i>
    <span>æ–°é é¢</span>
</a>

// 4. åœ¨ pages.css æ·»åŠ æ¨£å¼
.newpage-specific-style { }
```

### 10.2 æ–°å¢ AI åŠŸèƒ½

```javascript
// 1. åœ¨ chatbot.js æ·»åŠ è™•ç†å™¨
const NewFeatureHandler = {
    keywords: ['æ–°åŠŸèƒ½é—œéµå­—'],
    
    canHandle(message) {
        return containsKeywords(message, this.keywords);
    },
    
    async handle(message) {
        // è™•ç†é‚è¼¯
        return 'å›æ‡‰è¨Šæ¯';
    }
};

// 2. è¨»å†Šåˆ°è™•ç†éˆ
MessageHandlers.push(NewFeatureHandler);
```

### 10.3 æ–°å¢è³‡æ–™æ¬„ä½

```json
// 1. æ›´æ–° demo-data.json
{
    "newEntity": [
        { "id": "new_001", "field": "value" }
    ]
}

// 2. æ›´æ–° data-service.js
getNewEntity(id) {
    return this.data?.newEntity?.find(e => e.id === id);
}
```

---

## 11. æ¸¬è©¦æŒ‡å—

### 11.1 æ‰‹å‹•æ¸¬è©¦æª¢æŸ¥æ¸…å–®

```markdown
## åŠŸèƒ½æ¸¬è©¦æ¸…å–®

### ç™»å…¥æµç¨‹
- [ ] è¼¸å…¥æœ‰æ•ˆå¸³è™Ÿå¯é€²å…¥ QR é©—è­‰
- [ ] QR Code æ­£ç¢ºé¡¯ç¤º
- [ ] æƒææˆåŠŸå¯è·³è½‰é¦–é 
- [ ] ç™»å‡ºå¾Œç„¡æ³•ç›´æ¥é€²å…¥é¦–é 

### ç›®æ¨™è¨­å®š
- [ ] æ‰€æœ‰ç›®æ¨™æ¨™ç±¤å¯é»æ“Š
- [ ] è¼¸å…¥é‡‘é¡ã€æœŸç¨‹å¯è¨ˆç®—
- [ ] çµæœæ­£ç¢ºé¡¯ç¤º

### AI èŠå¤©
- [ ] å¯é–‹å•Ÿ/é—œé–‰å°è©±è¦–çª—
- [ ] è¨Šæ¯æ­£ç¢ºé€å‡º/æ¥æ”¶
- [ ] Ollama é›¢ç·šæ™‚æœ¬åœ°å›ç­”å¯ç”¨
- [ ] è‡ªå‹•åµæ¸¬å¯ç”¨æ¨¡å‹ï¼ˆç•¶é è¨­æ¨¡å‹ä¸å­˜åœ¨æ™‚ï¼‰

### ä¸»é¡Œåˆ‡æ›
- [ ] æ·±è‰²/æ·ºè‰²æ­£ç¢ºåˆ‡æ›
- [ ] æ‰€æœ‰é é¢æ¨£å¼æ­£ç¢º
- [ ] è³‡ç”¢è®ŠåŒ–ç›´æ–¹åœ–é¡è‰²è‡ªå‹•é©é…ä¸»é¡Œ
- [ ] é‡æ–°æ•´ç†å¾Œä¸»é¡Œä¿æŒ
```

### 11.2 ç€è¦½å™¨ç›¸å®¹æ€§

| ç€è¦½å™¨ | æœ€ä½ç‰ˆæœ¬ | æ¸¬è©¦ç‹€æ…‹ |
|--------|---------|---------|
| Chrome | 90+ | âœ… |
| Firefox | 88+ | âœ… |
| Edge | 90+ | âœ… |
| Safari | 14+ | âš ï¸ |

### 11.3 æ•ˆèƒ½æ¸¬è©¦

```javascript
// æ•ˆèƒ½è¨ˆæ™‚
console.time('page-load');
await loadPageContent('home');
console.timeEnd('page-load');  // ç›®æ¨™ < 500ms

console.time('ai-response');
await callOllamaAPI('test');
console.timeEnd('ai-response');  // ç›®æ¨™ < 10s
```

---

## 12. éƒ¨ç½²æµç¨‹

### 12.1 éƒ¨ç½²æª¢æŸ¥æ¸…å–®

```markdown
## éƒ¨ç½²å‰æª¢æŸ¥

### ç¨‹å¼ç¢¼
- [ ] æ‰€æœ‰ console.log å·²ç§»é™¤æˆ–æ”¹ç‚ºæ¢ä»¶å¼
- [ ] éŒ¯èª¤è™•ç†å®Œæ•´
- [ ] æ•æ„Ÿè³‡è¨Šæœªç¡¬ç·¨ç¢¼

### è³‡æº
- [ ] åœ–ç‰‡å·²å„ªåŒ–
- [ ] CSS/JS å¯è€ƒæ…®å£“ç¸®
- [ ] å¿«å–ç­–ç•¥è¨­å®š

### è¨­å®š
- [ ] API URL è¨­å®šæ­£ç¢º
- [ ] é è¨­å¸³è™Ÿå¯†ç¢¼å·²è®Šæ›´
- [ ] éŒ¯èª¤é é¢å·²è¨­å®š
```

### 12.2 éƒ¨ç½²æ­¥é©Ÿ

```bash
# 1. å»ºç«‹éƒ¨ç½²ç›®éŒ„
mkdir /var/www/finwmai

# 2. è¤‡è£½æª”æ¡ˆ
cp -r prototype/* /var/www/finwmai/

# 3. è¨­å®š Web ä¼ºæœå™¨
# Nginx ç¯„ä¾‹
server {
    listen 80;
    server_name finwmai.example.com;
    root /var/www/finwmai;
    index login.html;
    
    location / {
        try_files $uri $uri/ =404;
    }
}

# 4. è¨­å®š Ollamaï¼ˆå¦‚éœ€è¦ï¼‰
# ç¢ºä¿ Ollama æœå‹™åœ¨èƒŒæ™¯é‹è¡Œ

# 5. é©—è­‰éƒ¨ç½²
curl http://finwmai.example.com/login.html
```

### 12.3 ç‰ˆæœ¬ç®¡ç†

```bash
# èªæ„åŒ–ç‰ˆæœ¬
# MAJOR.MINOR.PATCH
# 1.0.0 -> 1.0.1 (ä¿®å¾©)
# 1.0.0 -> 1.1.0 (æ–°åŠŸèƒ½)
# 1.0.0 -> 2.0.0 (ç ´å£æ€§è®Šæ›´)

# Git æ¨™ç±¤
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

---

## ğŸ“š åƒè€ƒè³‡æº

- [BDD è¦æ ¼æ›¸](Fin_WMAI_BDD_V1.0_20260213.md)
- [Ollama æ–‡ä»¶](https://ollama.ai/docs)
- [MDN Web Docs](https://developer.mozilla.org/)

---

<div align="center">
  <p>Fin_WMAI é–‹ç™¼ç¶­è­·æ‰‹å†Š v1.0</p>
  <p>Â© 2026 Fin_WMAI Team</p>
</div>
